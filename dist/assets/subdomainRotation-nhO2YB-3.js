var g=Object.defineProperty;var y=(r,t,e)=>t in r?g(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var m=(r,t,e)=>y(r,typeof t!="symbol"?t+"":t,e);class b{constructor(){m(this,"subdomainConfigs",[{subdomain:"docs",category:"business",contentTypes:["application/pdf","text/html","application/msword"],trustScore:95,usageCount:0,lastUsed:new Date(0),maxDailyUse:1e3,description:"Document sharing and collaboration"},{subdomain:"files",category:"business",contentTypes:["application/pdf","application/zip","application/octet-stream"],trustScore:93,usageCount:0,lastUsed:new Date(0),maxDailyUse:800,description:"File storage and sharing"},{subdomain:"portal",category:"business",contentTypes:["text/html","application/json"],trustScore:92,usageCount:0,lastUsed:new Date(0),maxDailyUse:1200,description:"Business portal and applications"},{subdomain:"resources",category:"business",contentTypes:["application/pdf","text/html"],trustScore:90,usageCount:0,lastUsed:new Date(0),maxDailyUse:600,description:"Resource center and documentation"},{subdomain:"cdn",category:"technical",contentTypes:["application/javascript","text/css","image/png","image/jpeg"],trustScore:88,usageCount:0,lastUsed:new Date(0),maxDailyUse:2e3,description:"Content delivery network"},{subdomain:"static",category:"technical",contentTypes:["application/javascript","text/css","image/png"],trustScore:87,usageCount:0,lastUsed:new Date(0),maxDailyUse:1500,description:"Static asset hosting"},{subdomain:"assets",category:"technical",contentTypes:["image/png","image/jpeg","application/javascript"],trustScore:85,usageCount:0,lastUsed:new Date(0),maxDailyUse:1800,description:"Digital assets and media"},{subdomain:"api",category:"technical",contentTypes:["application/json","text/xml"],trustScore:83,usageCount:0,lastUsed:new Date(0),maxDailyUse:1e3,description:"API endpoints and services"},{subdomain:"media",category:"content",contentTypes:["image/jpeg","image/png","video/mp4","audio/mpeg"],trustScore:82,usageCount:0,lastUsed:new Date(0),maxDailyUse:1200,description:"Media content hosting"},{subdomain:"content",category:"content",contentTypes:["text/html","application/pdf"],trustScore:80,usageCount:0,lastUsed:new Date(0),maxDailyUse:900,description:"Content management system"},{subdomain:"blog",category:"content",contentTypes:["text/html"],trustScore:78,usageCount:0,lastUsed:new Date(0),maxDailyUse:500,description:"Blog and articles"},{subdomain:"downloads",category:"service",contentTypes:["application/zip","application/pdf","application/octet-stream"],trustScore:85,usageCount:0,lastUsed:new Date(0),maxDailyUse:700,description:"Download center"},{subdomain:"support",category:"service",contentTypes:["text/html","application/pdf"],trustScore:88,usageCount:0,lastUsed:new Date(0),maxDailyUse:400,description:"Customer support portal"},{subdomain:"help",category:"service",contentTypes:["text/html"],trustScore:86,usageCount:0,lastUsed:new Date(0),maxDailyUse:300,description:"Help documentation"},{subdomain:"secure",category:"security",contentTypes:["text/html","application/json"],trustScore:91,usageCount:0,lastUsed:new Date(0),maxDailyUse:200,description:"Secure access portal"},{subdomain:"admin",category:"security",contentTypes:["text/html","application/json"],trustScore:89,usageCount:0,lastUsed:new Date(0),maxDailyUse:150,description:"Administrative interface"},{subdomain:"app",category:"application",contentTypes:["text/html","application/json"],trustScore:84,usageCount:0,lastUsed:new Date(0),maxDailyUse:800,description:"Web application"},{subdomain:"dashboard",category:"application",contentTypes:["text/html","application/json"],trustScore:82,usageCount:0,lastUsed:new Date(0),maxDailyUse:600,description:"Analytics dashboard"}])}selectSubdomain(t={}){const{category:e,contentType:o,avoidRecent:n=!0,preferHighTrust:c=!0,balanceUsage:u=!0}=t;let a=[...this.subdomainConfigs];if(e&&(a=a.filter(s=>s.category===e)),o&&(a=a.filter(s=>s.contentTypes.includes(o)||s.contentTypes.includes("application/octet-stream"))),n){const s=new Date(Date.now()-36e5);a=a.filter(i=>i.lastUsed<s)}u&&(a=a.filter(s=>s.usageCount<s.maxDailyUse)),a.length===0&&(a=[...this.subdomainConfigs]);const d=a.map(s=>{let i=0;if(c&&(i+=s.trustScore*.4),u){const l=s.usageCount/s.maxDailyUse;i+=(1-l)*30}if(n){const l=(Date.now()-s.lastUsed.getTime())/36e5;i+=Math.min(l,24)*.83}return e&&s.category===e&&(i+=10),{config:s,score:i}});d.sort((s,i)=>i.score-s.score);const p=d.slice(0,Math.min(3,d.length));return p[Math.floor(Math.random()*p.length)].config}useSubdomain(t){const e=this.subdomainConfigs.find(o=>o.subdomain===t);e&&(e.usageCount++,e.lastUsed=new Date)}resetDailyUsage(){this.subdomainConfigs.forEach(t=>{t.usageCount=0})}getSubdomainStats(){return this.subdomainConfigs.map(t=>({subdomain:t.subdomain,category:t.category,trustScore:t.trustScore,usageCount:t.usageCount,usagePercentage:Math.round(t.usageCount/t.maxDailyUse*100),lastUsed:t.lastUsed.toISOString()}))}getRecommendations(){return{business:this.subdomainConfigs.filter(t=>t.category==="business").sort((t,e)=>e.trustScore-t.trustScore).map(t=>t.subdomain),technical:this.subdomainConfigs.filter(t=>t.category==="technical").sort((t,e)=>e.trustScore-t.trustScore).map(t=>t.subdomain),content:this.subdomainConfigs.filter(t=>t.category==="content").sort((t,e)=>e.trustScore-t.trustScore).map(t=>t.subdomain),security:this.subdomainConfigs.filter(t=>t.category==="security").sort((t,e)=>e.trustScore-t.trustScore).map(t=>t.subdomain)}}buildSubdomainUrl(t,e,o={}){const n=this.selectSubdomain(o);this.useSubdomain(n.subdomain);let c;if(t.startsWith("http://")||t.startsWith("https://")){const a=new URL(t);c=`${a.protocol}//${n.subdomain}.${a.hostname}`}else c=`https://${n.subdomain}.${t}`;const u=e.startsWith("/")?e:`/${e}`;return{url:`${c}${u}`,subdomain:n.subdomain,trustScore:n.trustScore}}getSubdomainConfig(t){return this.subdomainConfigs.find(e=>e.subdomain===t)}addCustomSubdomain(t){this.subdomainConfigs.push({...t,usageCount:0,lastUsed:new Date(0)})}updateTrustScore(t,e){const o=this.subdomainConfigs.find(n=>n.subdomain===t);o&&(o.trustScore=Math.max(0,Math.min(100,e)))}getMicrosoftOptimalSubdomain(){return this.selectSubdomain({category:Math.random()>.5?"business":"technical",preferHighTrust:!0,balanceUsage:!0,avoidRecent:!0})}getGmailOptimalSubdomain(){const t=["business","content","service"],e=t[Math.floor(Math.random()*t.length)];return this.selectSubdomain({category:e,preferHighTrust:!0,balanceUsage:!0})}getCorporateOptimalSubdomain(){return this.selectSubdomain({category:Math.random()>.7?"security":"business",preferHighTrust:!0,balanceUsage:!0,avoidRecent:!0})}}const U=new b;export{b as SubdomainRotationService,U as subdomainRotation};
